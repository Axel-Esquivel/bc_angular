<div class="page-header">
  <div>
    <h2>Productos</h2>
    <p>Gestiona el catálogo de productos.</p>
  </div>
  <p-button label="Nuevo" icon="pi pi-plus" [routerLink]="['/products/new']"></p-button>
</div>

<p-card>
  <form class="filters" [formGroup]="filtersForm" (ngSubmit)="loadProducts()">
    <div class="filter-item">
      <label for="search">Búsqueda</label>
      <input pInputText id="search" type="text" formControlName="search" placeholder="Nombre o SKU" />
    </div>
    <div class="filter-item">
      <label for="category">Categoría</label>
      <p-select
        inputId="category"
        [options]="categoryOptions"
        optionLabel="label"
        optionValue="value"
        formControlName="category"
        placeholder="Todas"
       appendTo="body"></p-select>
    </div>
    <div class="actions">
      <p-button type="submit" label="Aplicar" icon="pi pi-search"></p-button>
      <p-button label="Limpiar" severity="secondary" (onClick)="onResetFilters()"></p-button>
    </div>
  </form>
</p-card>

<p-card>
  <p-table [value]="products" [loading]="loading" dataKey="id">
    <ng-template pTemplate="header">
      <tr>
        <th>Nombre</th>
        <th>SKU</th>
        <th>Categoría</th>
        <th>Precio</th>
        <th>Estado</th>
        <th></th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-product>
      <tr>
        <td>{{ product.name }}</td>
        <td>{{ product.sku || '-' }}</td>
        <td>{{ product.category || '-' }}</td>
        <td>{{ product.price | currency: 'USD' : 'symbol' : '1.0-0' }}</td>
        <td>
          <span class="status" [class.inactive]="!product.isActive">{{ product.isActive ? 'Activo' : 'Inactivo' }}</span>
        </td>
        <td class="actions">
          <p-button
            label="Editar"
            icon="pi pi-pencil"
            size="small"
            [routerLink]="['/products', product.id]"
            severity="secondary"
          ></p-button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</p-card>
