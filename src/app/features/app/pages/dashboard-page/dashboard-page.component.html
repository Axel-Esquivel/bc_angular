<p-toast></p-toast>
<section class="home-launcher">
  <header class="home-header">
    <h1>Inicio</h1>
    <p>Selecciona un módulo para comenzar.</p>
  </header>

  <div class="card-grid" *ngIf="loading">
    <p-card class="module-card skeleton-card" *ngFor="let item of skeletonCards">
      <div class="card-body">
        <p-skeleton width="3rem" height="3rem" borderRadius="12px"></p-skeleton>
        <div class="card-text">
          <p-skeleton width="70%" height="1rem"></p-skeleton>
          <p-skeleton width="90%" height="0.85rem"></p-skeleton>
        </div>
        <p-skeleton width="6rem" height="2.25rem" borderRadius="8px"></p-skeleton>
      </div>
    </p-card>
  </div>

  <div class="card-grid" *ngIf="!loading && !contextMissing && cards.length > 0">
    <p-card
      class="module-card"
      *ngFor="let card of cards; trackBy: trackByKey"
      [ngClass]="{ disabled: !card.hasRoute }"
      (click)="onCardClick(card)"
      role="button"
      tabindex="0"
    >
      <div class="card-body">
        <div class="card-icon">
          <i [class]="card.icon"></i>
        </div>
        <div class="card-text">
          <h3>{{ card.name }}</h3>
          <p *ngIf="card.description">{{ card.description }}</p>
        </div>
      </div>
    </p-card>
  </div>
  <div class="empty-state" *ngIf="!loading && contextMissing">
    <h2>Selecciona un contexto</h2>
    <p>Elige una empresa para ver los módulos disponibles.</p>
    <p-button label="Ir al selector" icon="pi pi-briefcase" (onClick)="goToContext()"></p-button>
  </div>

  <div class="empty-state" *ngIf="!loading && !contextMissing && cards.length === 0">
    <h2>No hay módulos activos</h2>
    <p>Instala módulos para continuar con tu operación.</p>
    <p-button
      label="Ir al Marketplace"
      icon="pi pi-store"
      (onClick)="goToStore()"
    ></p-button>
  </div>
</section>


