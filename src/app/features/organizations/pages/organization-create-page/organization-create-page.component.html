<p-toast></p-toast>

<section class="org-create">
  <p-card header="Crear organizacion">
    <form class="form p-fluid" [formGroup]="form" (ngSubmit)="submit()">
      <div class="form-field">
        <label>Nombre</label>
        <input pInputText formControlName="name" placeholder="Mi organizacion" />
      </div>
      <div class="form-field">
        <label>Paises</label>
        <p-select
          class="w-full"
          [options]="countryOptions"
          optionLabel="name"
          optionValue="id"
          formControlName="countryIds"
          multiple
          [filter]="true"
          appendTo="body"
          placeholder="Seleccionar paises"
        >
          <ng-template pTemplate="footer">
            <div class="select-footer">
              <p-button
                label="Add New"
                icon="pi pi-plus"
                size="small"
                severity="secondary"
                [text]="true"
                [fluid]="true"
                (onClick)="openCreateCountryDialog()"
              ></p-button>
            </div>
          </ng-template>
        </p-select>
      </div>
      <div class="form-field">
        <label>Monedas</label>
        <p-select
          class="w-full"
          [options]="currencyOptions"
          optionLabel="name"
          optionValue="id"
          formControlName="currencyIds"
          multiple
          [filter]="true"
          appendTo="body"
          placeholder="Seleccionar monedas"
        >
          <ng-template pTemplate="footer">
            <div class="select-footer">
              <p-button
                label="Add New"
                icon="pi pi-plus"
                size="small"
                severity="secondary"
                [text]="true"
                [fluid]="true"
                (onClick)="openCreateCurrencyDialog()"
              ></p-button>
            </div>
          </ng-template>
        </p-select>
      </div>
      <div class="actions">
        <p-button type="button" label="Cancelar" severity="secondary" (onClick)="cancel()"></p-button>
        <p-button type="submit" label="Crear" [disabled]="submitting"></p-button>
      </div>
    </form>
  </p-card>
</section>

<p-dialog header="Agregar pais" [(visible)]="createCountryDialogOpen" [modal]="true" [style]="{ width: '420px' }">
  <form [formGroup]="createCountryForm" class="dialog-form">
    <label>Codigo</label>
    <input pInputText formControlName="code" />

    <label>Nombre</label>
    <input pInputText formControlName="name" />
  </form>
  <ng-template pTemplate="footer">
    <p-button label="Cancelar" [text]="true" (onClick)="createCountryDialogOpen=false"></p-button>
    <p-button label="Guardar" icon="pi pi-check" (onClick)="saveCountry()"></p-button>
  </ng-template>
</p-dialog>

<p-dialog header="Agregar moneda" [(visible)]="createCurrencyDialogOpen" [modal]="true" [style]="{ width: '420px' }">
  <form [formGroup]="createCurrencyForm" class="dialog-form">
    <label>Codigo</label>
    <input pInputText formControlName="code" />

    <label>Nombre</label>
    <input pInputText formControlName="name" />

    <label>Simbolo</label>
    <input pInputText formControlName="symbol" />
  </form>
  <ng-template pTemplate="footer">
    <p-button label="Cancelar" [text]="true" (onClick)="createCurrencyDialogOpen=false"></p-button>
    <p-button label="Guardar" icon="pi pi-check" (onClick)="saveCurrency()"></p-button>
  </ng-template>
</p-dialog>
