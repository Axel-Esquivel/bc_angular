<p-toast></p-toast>

<div class="setup">
  <div class="setup-header">
    <h2>Instalar modulos</h2>
  </div>

  <p-card>
    <p class="setup-subtitle">Modulos a instalar</p>
    <div class="modules-grid" *ngIf="modules.length > 0; else emptyState">
      <div class="module-card" *ngFor="let module of modules">
        <div class="module-head">
          <h3>{{ module.name }}</h3>
          <p-button
            [label]="isEnabled(module.id) ? 'Instalado' : 'Instalar'"
            [severity]="isEnabled(module.id) ? 'success' : 'secondary'"
            (onClick)="toggleModule(module)"
          ></p-button>
        </div>
        <p class="module-meta">Clave: {{ module.id }}</p>
        <p class="module-meta">
          Dependencias:
          {{ (module.dependencies ?? []).join(', ') || 'Ninguna' }}
        </p>
      </div>
    </div>

    <ng-template #emptyState>
      <div class="empty-state">No hay modulos para instalar.</div>
    </ng-template>

    <div class="footer-actions">
      <p-button label="Instalar y continuar" [disabled]="submitting" (onClick)="save()"></p-button>
    </div>
  </p-card>
</div>
