<p-toast></p-toast>

<section class="workspace-modules">
  <div class="header-actions">
    <p-button label="Volver" icon="pi pi-arrow-left" severity="secondary" (onClick)="goBack()"></p-button>
  </div>
  <p-card header="Administrar modulos">
    <div class="modules-grid" *ngIf="modules.length > 0; else emptyState">
      <p-card *ngFor="let module of modules" class="module-card">
        <ng-template pTemplate="title">
          <div class="card-title">
            <span>{{ module.name }}</span>
            <span class="version">v{{ module.version }}</span>
          </div>
        </ng-template>
        <ng-template pTemplate="subtitle">
          <span *ngIf="module.description; else noDescription">{{ module.description }}</span>
          <ng-template #noDescription>Sin descripcion</ng-template>
        </ng-template>
        <ng-template pTemplate="footer">
          <div class="card-footer">
            <div class="toggle">
              <span class="state-label">{{ isEnabled(module) ? 'Activo' : 'Inactivo' }}</span>
              <p-toggleswitch
                [ngModel]="isEnabled(module)"
                [disabled]="processing.has(module.key)"
                (onChange)="toggleModule(module)"
              ></p-toggleswitch>
            </div>
            <span class="processing" *ngIf="processing.has(module.key)">Guardando...</span>
          </div>
        </ng-template>
      </p-card>
    </div>
    <ng-template #emptyState>
      <div class="empty-state">
        <p>No hay modulos disponibles.</p>
      </div>
    </ng-template>
  </p-card>
</section>
